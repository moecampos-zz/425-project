---
title: "Introduction"
author: "Mauricio Campos"
date: "19 de diciembre de 2017"
output:
  pdf_document: default
  html_document: default
---

## Introduction

Spending days on the open sea hunting for treasure can leave any pirate suffering from scurvy. Therefore, it is important for a pirate to have an easy way to find the perfect place on land to drop anchor and to rest up for the next big excursion. We plan to use data from Airbnb in Venice, Italy to design a data-driven application that will help these pirates find the perfect booking. 

Taking into account what features would most interest a pirate when choosing what locations to visit, we are interested in answering the following three questions:

* Is there a difference in pricing in Airbnb listings among the different neighborhoods of Venice?
* What locations distinguish the Veniceâ€™s neighborhoods?
* What variables best predict prices of Airbnb listings in Venice?

## Data Background


```{r, echo = FALSE, message=FALSE}
library(here)
listings <- read.csv(here("data", "listings.csv"), header = T)
```


The data was taken from the website insideairbnb.com, which is an independent entity from Airbnb that lets you explore data from certain cities around the world. The data that the compile in their website is publicly available information. The data set for Venice was released in partnership with RESET VENEZIA, a group of local activists that strive to use data for the benefit of the local communities in Venice. The data was compiled on May 9th 2017 and has `r nrow(listings)` listings and `r ncol(listings)` variables. 

## Data Cleaning

Of the `r ncol(listings)` variables, 4 represent ID variables and the rest have potential use in a linear model. These are: neighborhood group, neighborhood, latitude, longitude, room type, price, minimum nights, number of reviews, date of the last review, reviews per month, calculated host listings count and days available in a year. Date of the last review was not taken into account since not all listings had reviews and number or reviews or reviews per month could be a much more powerful predictive variable in a future model. Another variable that was discarded early on was the calculated host listings count which specified, for each host, the estimated number of listings that entity had. Since this variable describes best the host instead of the listing we decided to not use it in the model. 

There were `r sum(is.na(listings))` NA's in the data set, however they were all in the variable reviews per month. By doing careful analysis of the data set it was discovered that all the NA's corresponded to listings with zero reviews so the NA's were changed into zeroes. 

The location of a listing will have a large impact on the pricing in a predictive sense. Our data gives us several ways of measuring the location of a listing: the neighborhood of the listing, the neighborhood group of the listing, the latitude, and the longitude. These covariates are strongly correlated and so we decided to remove some of these predictors. The most interpretable of these covariates were neighborhood and neighborhood group. Neighborhood group classifies listings according to whether they are mainland or island and since a given neighborhood is either on the island or mainland, it is sufficient to consider only neighborhood. 

Once we decided to use neighborhoods as our geographical predictor, we faced the challenge of scale. The neighborhood predictor, as a categorical variable, has 56 levels, which is simply too many levels for the classical techniques that we have studied throughout the semester in STAT425. 

We decided to reduce the number of neighborhoods in our analysis. The Airbnb website lists nine major neighborhoods, "San Marco", "Castello", "Cannaregio", "Dorsoduro", "Giudecca", "Lido", "Santa Croce", "Murano", and "San Polo." We therefore re-coded the neighborhood factor levels to be these nine neighborhoods. We also think that these neighborhood are the most convenient for pirates: each of these neighborhoods is accessible by water. Indeed, these nine neighborhoods account for 81.5% of listings. 

In the end, the data set was reduced to 8 variables and 4910 observations. Of those 8 variables, 7 were used in the pricing model and the 8th one (listing id) was used to link the listings with the analysis of the reviews. 
